"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getFallbackProxy = exports.partAsStringWithoutTypes = exports.partsAsStringWithoutTypes = exports.trimAllValues = exports.removeEmptyValues = void 0;
const core_1 = require("./core.cjs");
const removeEmptyValues = (object) => Object.fromEntries(Object.entries(object)
    .map(([key, value]) => key !== 'i' && value && value != '0' && [key, value])
    .filter(Boolean));
exports.removeEmptyValues = removeEmptyValues;
const trimAllValues = (part) => Object.fromEntries(Object.keys(part).map((key) => {
    var _a;
    const val = part[key];
    return [
        key,
        Array.isArray(val) ? val.map((v) => v === null || v === void 0 ? void 0 : v.trim()) : val === !!val ? val : (_a = val) === null || _a === void 0 ? void 0 : _a.trim(),
    ];
}));
exports.trimAllValues = trimAllValues;
const partsAsStringWithoutTypes = (parts) => parts.map(exports.partAsStringWithoutTypes).join('');
exports.partsAsStringWithoutTypes = partsAsStringWithoutTypes;
const partAsStringWithoutTypes = (part) => {
    var _a;
    if (typeof part === 'string') {
        return part;
    }
    if ((0, core_1.isPluralPart)(part)) {
        return `{{${[part.z, part.o, part.t, part.f, part.m, part.r].filter((value) => value !== undefined).join('|')}}}`;
    }
    return `{${part.k}${part.n ? '?' : ''}${((_a = part.f) === null || _a === void 0 ? void 0 : _a.length) ? `|${part.f.join('|')}` : ''}}`;
};
exports.partAsStringWithoutTypes = partAsStringWithoutTypes;
const getFallbackProxy = (prefixKey) => new Proxy((prefixKey ? () => prefixKey : {}), {
    get: (_target, key) => (0, exports.getFallbackProxy)(prefixKey ? `${prefixKey}.${key}` : key),
});
exports.getFallbackProxy = getFallbackProxy;
//# sourceMappingURL=core-utils.js.map