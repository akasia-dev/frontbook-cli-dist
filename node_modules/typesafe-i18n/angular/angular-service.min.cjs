"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=/\?\?/g,e=(e,r,n,o)=>{const s=o[0],i=s&&"object"==typeof s&&s.constructor===Object;return((e,r,n,o)=>e.map((e=>{if("string"==typeof e)return e;const{k:s="0",f:i=[]}=e,a=o[s];if((t=>!(!t.o&&!t.r))(e))return(("boolean"==typeof a?a?e.o:e.r:((t,{z:e,o:r,t:n,f:o,m:s,r:i},a)=>{switch(e&&0==a?"zero":t.select(a)){case"zero":return e;case"one":return r;case"two":return n;case"few":return o;case"many":return s;default:return i}})(r,e,a))||"").replace(t,a);const l=i.length?((t,e,r)=>e.reduce(((e,r)=>{var n,o;return null!==(o=null===(n=t[r])||void 0===n?void 0:n.call(t,e))&&void 0!==o?o:e}),r))(n,i,a):a;return(""+(null!=l?l:"")).trim()})).join(""))(e,r,n,1===o.length&&i?s:o)},r=t=>new Proxy(t?()=>t:{},{get:(e,n)=>r(t?`${t}.${n}`:n)}),n=/({?{[^\\}]+}}?)/g,o=(t,e=!0,r="",o="")=>t.split(n).filter(Boolean).map((t=>{if(!t.match(n))return t;const e=t.substring(1,t.length-1);if(e.startsWith("{")&&e.endsWith("}"))return((t,e)=>{let[r,n]=t.split(":");n||(n=r,r=e);const o=n.split("|"),[s,i,a,l,c,u]=o,h=o.filter((t=>void 0!==t)).length;return 1===h?{k:r,r:s}:2===h?{k:r,o:s,r:i}:3===h?{k:r,z:s,o:i,r:a}:{k:r,z:s,o:i,t:a,f:l,m:c,r:u}})(e.substring(1,e.length-1),o);const s=(t=>{const[e="",...r]=t.split("|"),[n="",o]=e.split(":"),[s,i]=n.split("?");return{k:s,i:o,n:""===i,f:r}})(e);return o=s.k||o,!r&&(r=o),s})).map((t=>{if("string"==typeof t)return t;t.k||(t.k=r||"0");const n=(t=>Object.fromEntries(Object.keys(t).map((e=>{var r;const n=t[e];return[e,Array.isArray(n)?n.map((t=>null==t?void 0:t.trim())):n===!!n?n:null===(r=n)||void 0===r?void 0:r.trim()]}))))(t);return e?(o=n,Object.fromEntries(Object.entries(o).map((([t,e])=>"i"!==t&&e&&"0"!=e&&[t,e])).filter(Boolean))):n;var o})),s=(t,r,n)=>{const s={},i=new Intl.PluralRules(t);return(t,...a)=>e(((t,e)=>t[e]||(t[e]=o(e)))(s,((t,e)=>{var r;return e.split(".").forEach((e=>t=t[e])),null!==(r=t)&&void 0!==r?r:e})(r,t)),i,n,a)};const i=(t,e,r={})=>new Proxy(e?t.bind(null,e):r,{get:(n,o)=>!(n===r&&"then"===o)&&i(t,e?`${e}.${o}`:o)});exports.I18nServiceRoot=class{constructor(t="",e=(()=>({})),n=(()=>({}))){this.baseLocale=t,this.getTranslationForLocale=e,this.initFormatters=n,this._isLoadingLocale=!1,this.currentLocale=null,this._LL=r()}async initI18n(t=this.baseLocale){await this.setLocale(t)}get isLoadingLocale(){return this._isLoadingLocale}get LL(){return this._LL}get locale(){return this.currentLocale}async setLocale(t){const e=this.getTranslationForLocale(t),r=this.initFormatters(t);this._LL=function(t,e,r={}){return i(s(t,e,r))}(t,e instanceof Promise?await e:e,r instanceof Promise?await r:r),this.currentLocale=t}};
