const t=/\?\?/g,r=(r,e,n,o)=>{const i=o[0],s=i&&"object"==typeof i&&i.constructor===Object;return((r,e,n,o)=>r.map((r=>{if("string"==typeof r)return r;const{k:i="0",f:s=[]}=r,a=o[i];if((t=>!(!t.o&&!t.r))(r))return(("boolean"==typeof a?a?r.o:r.r:((t,{z:r,o:e,t:n,f:o,m:i,r:s},a)=>{switch(r&&0==a?"zero":t.select(a)){case"zero":return r;case"one":return e;case"two":return n;case"few":return o;case"many":return i;default:return s}})(e,r,a))||"").replace(t,a);const l=s.length?((t,r,e)=>r.reduce(((r,e)=>{var n,o;return null!==(o=null===(n=t[e])||void 0===n?void 0:n.call(t,r))&&void 0!==o?o:r}),e))(n,s,a):a;return(""+(null!=l?l:"")).trim()})).join(""))(r,e,n,1===o.length&&s?i:o)},e=t=>new Proxy(t?()=>t:{},{get:(r,n)=>e(t?`${t}.${n}`:n)}),n=/({?{[^\\}]+}}?)/g,o=(t,r=!0,e="",o="")=>t.split(n).filter(Boolean).map((t=>{if(!t.match(n))return t;const r=t.substring(1,t.length-1);if(r.startsWith("{")&&r.endsWith("}"))return((t,r)=>{let[e,n]=t.split(":");n||(n=e,e=r);const o=n.split("|"),[i,s,a,l,c,u]=o,h=o.filter((t=>void 0!==t)).length;return 1===h?{k:e,r:i}:2===h?{k:e,o:i,r:s}:3===h?{k:e,z:i,o:s,r:a}:{k:e,z:i,o:s,t:a,f:l,m:c,r:u}})(r.substring(1,r.length-1),o);const i=(t=>{const[r="",...e]=t.split("|"),[n="",o]=r.split(":"),[i,s]=n.split("?");return{k:i,i:o,n:""===s,f:e}})(r);return o=i.k||o,!e&&(e=o),i})).map((t=>{if("string"==typeof t)return t;t.k||(t.k=e||"0");const n=(t=>Object.fromEntries(Object.keys(t).map((r=>{var e;const n=t[r];return[r,Array.isArray(n)?n.map((t=>null==t?void 0:t.trim())):n===!!n?n:null===(e=n)||void 0===e?void 0:e.trim()]}))))(t);return r?(o=n,Object.fromEntries(Object.entries(o).map((([t,r])=>"i"!==t&&r&&"0"!=r&&[t,r])).filter(Boolean))):n;var o})),i=(t,e,n)=>{const i={},s=new Intl.PluralRules(t);return(t,...a)=>r(((t,r)=>t[r]||(t[r]=o(r)))(i,((t,r)=>{var e;return r.split(".").forEach((r=>t=t[r])),null!==(e=t)&&void 0!==e?e:r})(e,t)),s,n,a)};const s=(t,r,e={})=>new Proxy(r?t.bind(null,r):e,{get:(n,o)=>!(n===e&&"then"===o)&&s(t,r?`${r}.${o}`:o)});class a{constructor(t="",r=(()=>({})),n=(()=>({}))){this.baseLocale=t,this.getTranslationForLocale=r,this.initFormatters=n,this._isLoadingLocale=!1,this.currentLocale=null,this._LL=e()}async initI18n(t=this.baseLocale){await this.setLocale(t)}get isLoadingLocale(){return this._isLoadingLocale}get LL(){return this._LL}get locale(){return this.currentLocale}async setLocale(t){const r=this.getTranslationForLocale(t),e=this.initFormatters(t);this._LL=function(t,r,e={}){return s(i(t,r,e))}(t,r instanceof Promise?await r:r,e instanceof Promise?await e:e),this.currentLocale=t}}export{a as I18nServiceRoot};
